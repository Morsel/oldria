<% semantic_form_for [:admin, @question] do |f| %>
    <% f.inputs do %>
        <%= f.input :title, :label => "Your question" %>
        
        <label for="topic">Topic</label>
        <%= select_tag "topic", 
            options_from_collection_for_select(Topic.all, :id, :title, (@question.new_record? ? nil : @question.chapter.topic_id)), 
            :onchange => remote_function(:url => select_admin_chapters_path, :with => "'id=' + $('#topic').val()") %>

        <%= f.input :chapter, :collection => (@question.new_record? ? Topic.first.chapters : @question.topic.chapters) %>
        <label for="profile_question_restaurant_roles">For which roles?<abbr title="required">*</abbr></label>
        <% for category in @roles.keys %>
          <label for="all_<%= category %>">
            <%= check_box_tag "#{category}", 1, false, :onchange => "selectCategoryGroup(this.id)", :style => "margin-left: 0" %> 
            All <%= category %>
          </label>
          
          <%= f.input :restaurant_roles, :as => :check_boxes, :label => "&nbsp;", :collection => @roles[category], :required => false, :wrapper_html => { :id => "profile_question_restaurant_roles_#{category.gsub(/ /, "_") rescue nil}_input" } %>
          <hr/>
        <% end %>
    <% end %>
    <p><%= button_tag "Save Question" %></p>
<% end %>
