<% semantic_form_for [restaurant, promotion], :html => { :multipart => true } do |f| %>
    <% f.inputs do %>
        <%= f.input :promotion_type %>
        <%= f.input :headline, :hint => "Limit: 144 characters" %>
        <%= f.input :details, :hint => "Stay under 1000 characters. Basic HTML formatting is allowed.", :input_html => { :rows => 4 } %>
        <%= f.input :link %>
        <%= f.input :attachment, :hint => "PDF files allowed" %>
        <%= f.input :start_date %>
        <%= f.input :end_date, :selected => nil %>
        <%= f.input :date_description, :label => "Repeating on", :hint => "Example: every Monday in March" %>
        <% if !promotion.new_record? && promotion.attachment.file? -%>
        Current attachment: <%= link_to promotion.attachment_file_name, promotion.attachment.url %>
        <% end -%>

        <% if promotion.new_record? -%>
        <%= f.input :post_to_twitter, :as => "boolean", :label => "Post to my Twitter account", :input_html => { :checked => "checked" } if @restaurant.twitter_authorized? %>
        <%= f.input :post_to_facebook_page, :as => "boolean", :label => "Post to Facebook page \"#{@restaurant.facebook_page.fetch.name}\"", :input_html => { :checked => "checked" } if @restaurant.has_facebook_page? %>
        <% end -%>
    <% end %>

    <%= f.submit "Post" %>
<% end %>
