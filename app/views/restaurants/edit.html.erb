<% title "Editing Restaurant" %>

<% content_for :head do -%>
  <%= stylesheet_link_tag 'colorbox' %>
<% end -%>

<% semantic_form_for(@restaurant) do |f| %>

  <% f.inputs :name => "Basics", :class => "title span-8" do %>
    <%= f.input :name %>
    <%= f.input :description, :as => :text %>
  <% end %>

	<% f.inputs :name => "Address", :class => "span-8 column" do %>
		<%= f.input :street1, :label => 'Street Address' %>
		<%= f.input :street2, :label => 'Street Address Line 2 (Optional)' %>
		<%= f.input :city, :input_html => {:class => 'span-3'}, :wrapper_html => {:class => 'span-3 column'}  %>
		<%= f.input :state, :input_html => {:class => 'span-1'}, :wrapper_html => {:class => 'span-1 column'}   %>
		<%= f.input :zip, :input_html => {:class => 'span-2'}, :wrapper_html => {:class => 'span-2 column'}   %>
		<%= f.input :phone_number, :input_html => {:class => 'span-2'}, :wrapper_html => {:class => 'span-2 column'}   %>
		<%= f.input :metropolitan_area, :wrapper_html => {:class => 'clear'} %>
		<%= f.input :james_beard_region, :label => "Region" %>
	<% end -%>

	<% f.inputs :name => 'Other', :class => "span-9 column last" do %>
    <%= f.input :hours, :as => :text %>
		<%= f.input :manager %>
    <%= f.input :media_contact %>
		<%= f.input :cuisine %>
    <%= f.input :opening_date %>
    <%= f.input :website %>
    <%= f.input :twitter_username, :hint => "Not the whole URL, just your username" %>
    <%= f.input :facebook_page, :hint => "Entire URL of your Facebook page" %>
    <%= f.input :management_company_name, :hint => "Just the company name" %>
    <%= f.input :management_company_website, :hint => "Full URL to the company website" %>
		<%= f.input :facts, :input_html => { :rows => 3 } %>
	<% end %>

	<p class="clear">
		<%= button_tag "Save", :class => 'positive' %>
	</p>
<% end %>

<%= render :partial => 'profiles/extended_profile_section', :locals => {
        :associated => @restaurant,
        :association => "accolades",
        :caption => "Accolades",
        :form_path => new_restaurant_accolade_path(@restaurant)} %>

<% semantic_form_for :logo, @restaurant.logo, :url => upload_logo_restaurant_path(@restaurant), :html => { :multipart => true } do |logo_form| %>
    <% logo_form.inputs :name => 'Logo', :class => "span-17 column last clear", :id => "logo" do %>
        <% logo = @restaurant.logo || Image.new %>
        <%= image_tag logo.attachment.url(:medium), :id => "restaurant_logo" %>
        <%= logo_form.file_field 'attachment' %>
        <%= logo_form.submit 'Upload', :class => 'clear' %>
        <%= link_to "Remove", restaurant_logo_path(@restaurant, logo), :method => :delete, :confirm => "Are you sure you want to remove the logo?" %>
    <% end %>
<% end %>

<p>
	<%= link_to "Edit Restaurant employees", restaurant_employees_path(@restaurant), :class => 'button' %>
</p>

<p>
    <%= link_to "Manage Menus", restaurant_menus_path(@restaurant), :class => "button" %>
</p>

<p>
    <%= link_to "Manage Photos", edit_photos_restaurant_path(@restaurant), :class => "button" %>
</p>
