<div id="restaurant_profile_view" class="clear clearfix">

  <%= render 'restaurant_header' %>
  
  <h2>Details</h2>
  <div class="manager_and_facts equal-height">
    <% dl_if(@restaurant.description, :class => "list_item", :id => "description") do %>
      <dt>Description:</dt> 
      <dd><%= @restaurant.description %></dd>
    <% end %>
    
    <% dl_if(@restaurant.cuisine, :class => "list_item", :id => "cuisine") do %>
      <dt>Cuisine:</dt> 
      <dd><%=h @restaurant.cuisine.try(:name) %></dd>
    <% end %>

    <% dl_if @restaurant.manager, :class => "list_item", :id => "manager" do %>
      <dt>Manager:</dt> 
      <dd><%= link_to h(@restaurant.manager.name), profile_path(:username => @restaurant.manager.username) %></dd>
    <% end %>

    <% dl_if @restaurant.media_contact, :class => "list_item", :id => "media_contact" do %>
      <dt>Media Contact:</dt> 
      <dd><%= link_to h(@restaurant.media_contact.name), profile_path(:username => @restaurant.media_contact.username) %></dd>
    <% end %>

    <% dl_if(@restaurant.management_company_name.present?, :class => "list_item", :id => "management_company") do %>
      <dt>Management Company:</dt>
      <% if @restaurant.management_company_website.present? %>
        <dd><%= link_to h(@restaurant.management_company_name), @restaurant.management_company_website %></dd>
      <% else %>
        <dd><%= h(@restaurant.management_company_name) %><dd>
      <% end %>
    <% end %>

  </div><!-- .manager_and_facts -->
  
  <div class="account_contact equal-height">
    <% dl_if(@restaurant.opening_date, :class => "list_item") do %>
      <dt>Opening Date:</dt> 
      <dd id="opening_date"><%= @restaurant.opening_date.to_s(:long) %></dd>
    <% end %>

    <% dl_if(@restaurant.menus.any?, :class => "list_item", :id => "menus") do %>
      <dt>Menus:</dt>
      <dd>
        <ul>
          <%= render @restaurant.menus %>
        </ul>
      </dd>
    <% end %>
    <% dl_if(@restaurant.account_type, :class => "list_item account", :id => "account_status") do %>
      <dt>Account Status:</dt> 
      <dd class="currently"><%= @restaurant.account_type %></dd>
    <% end %>
    
    <% dl_if(@restaurant.phone_number, :class => "list_item", :id => "phone_number") do %>
      <dt>Phone Number:</dt> 
      <dd id="phone_number"><%=h @restaurant.phone_number %></dd>
    <% end %>
    
    <% dl_if(@restaurant.hours, :class => "list_item", :id => "hours") do %>
      <dt>Hours:</dt> 
      <dd><%= h @restaurant.hours %></dd>
    <% end %>
  </div><!-- .account_contact -->
  
  <div class="account_social equal-height">
    <% dl_if(@restaurant.website.present?, :class => "list_item", :id => "website") do %>
      <dt>Website:</dt> 
      <dd><%= link_to h(@restaurant.website), @restaurant.website%></dd>
    <% end %>

    <% dl_if(@restaurant.facebook_page.present?, :class => "list_item", :id => "facebook_page") do %>
      <dt>Facebook Page:</dt> 
      <dd><%= link_to h(@restaurant.facebook_page), @restaurant.facebook_page%></dd>
    <% end %>
    
    <% dl_if(@restaurant.twitter_username.present?, :class => "list_item", :id => "twitter_username") do %>
      <dt>Twitter:</dt> 
      <dd>
        <%= link_to "@#{h(@restaurant.twitter_username)}", "http://twitter.com/#{@restaurant.twitter_username}"%>
      </dd>
    <% end %>

  </div><!-- .account_details -->

  <div class="rest_staff clearfix">

    <h2>Restaurant Staff</h2>
    <div class="restaurant_employees employments clearfix">
      <%= render :partial => 'employment', :collection => @employments %>
    </div><!-- .employments -->

  </div><!--.rest_staff-->

  <% div_if(@restaurant.feature_pages.any?, :class => "clear clearfix", :id => "feature_pages") do %>
    <h2>See more about:</h2>
    <%= render @restaurant.feature_pages %>
  <% end %>

  <%= render :partial => 'profile_questions/behind_the_line', :locals => { :subject => @restaurant } %>

  <div id="a_la_minute">
    <h3 id="alm-title">A La Minute Questions</h3>
    <div class="edit_profile_link">
      <%= link_to "edit your answers", bulk_edit_restaurant_a_la_minute_answers_path(:restaurant_id => @restaurant) %>
    </div>

    <div class="questions">
      <%= render :partial => "a_la_minute_question",
              :collection => ALaMinuteAnswer.newest_for(@restaurant), :as => :answer %>
    </div>
    <p class="view_all"><a href="#">View all answers &raquo;</a></p>
  </div><!--#a_la_minute-->

</div><!-- #restaurant_profile_view -->


<% content_for :javascript do %>
  <script type="text/javascript">
    //<![CDATA[
    $('.a_la_minute_answer_eip').eip("/a_la_minute_answers/edit_in_place", {
        data: "restaurant_id=" + $(".a_la_minute_answer_eip").attr("data-restaurant-id") } );
    $('.hidden_with_js').hide();
    $('.submit_on_change').change(function() {
      $(this).closest("form").ajaxSubmit();
    });
    //]]>
  </script>
<% end %>

