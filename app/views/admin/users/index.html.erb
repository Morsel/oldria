<h1>All Users</h1>

<table>
  <tr>
    <th>Username</th>
    <th>Email</th>
    <th>Admin</th>
    <th>Created on</th>
    <th>Confirmed on</th>
    <th>Last Used on</th>
  </tr>

<% @users.each do |user| %>
  <tr class="<%= user.admin? ? 'admin' : '' %>">
    <td><%=h user.username %></td>
    <td><%=h user.email %></td>
    <td><%= user.admin? ? '&#10003;' : '' %></td>

    <td>
      <%=h user.created_at.to_s(:long) %><br/>
      <small><%=h time_ago_in_words(user.created_at) %> ago</small>
    </td>

    <td>
    <% if user.confirmed? -%>
      <%=h user.confirmed_at.to_s(:long) %><br/>
      <small><%=h time_ago_in_words(user.confirmed_at) %> ago</small>
    <% end -%>
    </td>

    <td>
    <% if user.last_request_at -%>
      <%=h user.last_request_at.to_s(:long) %><br/>
      <small><%=h time_ago_in_words(user.last_request_at) %> ago</small>
    <% end -%>
    </td>

    <td class="utility">
      <%= link_to 'Show', admin_user_path(user) %>
      <%= link_to 'Edit', edit_admin_user_path(user) %>
      <%= link_to 'Destroy', admin_user_path(user), :confirm => 'Are you sure?', :method => :delete %>
    </td>
  </tr>
<% end %>
</table>

<br />

<p><%= link_to 'Sign Up a New User', new_user_path %></p>